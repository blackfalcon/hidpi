/*! Sass HiDPI v1 | MIT License | github.com/Kaelig/sass-hidpi */
$hidpi-debug: false !default;

@import 'compass/css3';

@mixin hidpi-abstract($image) {
  $image-fullname: '#{$image}.png';
  $image-hidpi-fullname: '#{$image}_x2.png';
  background-image: image-url($image-hidpi-fullname);
  @include background-size(
    image-width($image-fullname)
    image-height($image-fullname)
  );
}

@mixin hidpi($image: false) {
  @if $hidpi-debug {
    @if $image {
      @include hidpi-abstract($image);
    } @else {
      @content;
    }
  } @else {
    @media (-webkit-min-device-pixel-ratio: 1.3),
           (-o-min-device-pixel-ratio: 2.6/2),
           (min--moz-device-pixel-ratio: 1.3),
           (min-device-pixel-ratio: 1.3) {
      @if $image {
        @include hidpi-abstract($image);
      } @else {
        @content;
      }
    }
  }
}
